!function(e){var t={};function s(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=t,s.d=function(e,t,o){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)s.d(o,n,function(t){return e[t]}.bind(null,n));return o},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s(s.s=0)}([function(e,t,s){"use strict";s.r(t);class o extends React.Component{constructor(e){super(e)}handleClick(e){e.preventDefault();const t=e.target.parentElement.parentElement,s=t.children[0].children[0].value,o=t.children[1].children[0].value;let n=new WebSocket("ws://"+s+":8888");this.props.onConnect(n,o,s)}render(){this.props.aeskey,this.props.ip;return React.createElement("div",{className:"connectionForm"},React.createElement("div",{},React.createElement("input",{placeholder:"IP Address",defaultValue:this.props.ip})),React.createElement("div",{},React.createElement("input",{placeholder:"Key",defaultValue:this.props.aeskey})),React.createElement("div",{},React.createElement("button",{onClick:e=>this.handleClick(e)},"Connect")))}}class n extends React.Component{constructor(e){super(e)}render(){return React.createElement("div",{className:"numberControl "+this.props.className},React.createElement("div",{className:"label"},this.props.label),React.createElement("div",{className:"counter color-"+this.props.color},this.props.value),React.createElement("div",{className:"buttons"},this.props.buttons))}}class a extends React.Component{constructor(e){super(e)}renderButton(e,t,s){let o=React.createElement("img",{src:"./assets/"+e+".png"});return React.createElement("button",{onClick:()=>this.props.onClick({control:t,value:s}),key:"period"+s},o)}render(){const e=[];return e.push(React.createElement("div",{key:"periodBtns"},this.renderButton("ArrowUp","period",1),this.renderButton("Reset","periodReset",0))),e.push(this.renderButton("ArrowDown","period",-1)),React.createElement(n,{className:"period",label:this.props.label,color:"green",value:this.props.value,buttons:e})}}class r extends React.Component{constructor(e){super(e)}renderButton(e,t,s){return React.createElement("button",{onClick:()=>this.props.onClick({control:"shotClock"+s,value:0}),value:s,key:"ShotClock"+s},t?React.createElement("img",{src:"./assets/"+e+".png"}):e)}render(){const e=[];e.push(React.createElement("div",{key:"shotClockBtns"},this.renderButton("Play",!0,"StartStop"),this.renderButton("Reset",!0,"Reset"))),e.push(this.renderButton("1/2",!1,"ResetShort"));let t=parseFloat(this.props.value);return t=t>10?parseInt(t):t.toFixed(1)+"",React.createElement(n,{className:"shotclock",label:this.props.label,color:"red",value:t,buttons:e})}}class c extends React.Component{constructor(e){super(e)}renderButton(e,t,s){return React.createElement("button",{onClick:()=>this.props.onClick({control:s,value:0})},t?React.createElement("img",{src:`./assets/${e}.png`}):e)}render(){return React.createElement("div",{className:"gameTime"},React.createElement("div",{className:"gameClock"},React.createElement("div",{className:"clock color-orange"},this.props.data.clockLeft+this.props.data.clockMiddle+this.props.data.clockRight),React.createElement("div",{},this.renderButton("Play",!0,"clockStartStop"),this.renderButton("Reset",!0,"clockReset")),this.renderButton("Horn",!1,"playHorn")),React.createElement("div",{},React.createElement(a,{label:"Period",value:this.props.data.period,onClick:e=>this.props.onClick(e)},"period"),React.createElement(r,{label:"ShotClock",value:this.props.data.shotClock,onClick:e=>this.props.onClick(e)})),React.createElement("div",{className:"possession"},"Possession",React.createElement("div",{},React.createElement("button",{onClick:e=>this.props.onClick({control:"possLeft",value:0,className:"left"==this.props.data.poss?"active":""})},"Left"),React.createElement("button",{onClick:e=>this.props.onClick({control:"possClr",value:0})},"Clear"),React.createElement("button",{onClick:e=>this.props.onClick({control:"possRight",value:0,className:"right"==this.props.data.poss?"active":""})},"Right")),this.renderButton("Cancel Timeout",!1,"cancelTimeOut")))}}class l extends React.Component{constructor(e){super(e)}handleClick(e="",t){this.props.onClick({control:this.props.team+this.props.control+e,value:t})}renderLabel(e,t=null){let s=`./assets/${e}.png`;if(null!=t){s="./assets/Arrow"+(e<0?"Down":"Up")+Math.abs(e)+".png"}return React.createElement("img",{src:s})}renderButton(e,t=null){let s=()=>this.handleClick("",e);return null==t&&(s=()=>this.handleClick(e,0)),React.createElement("button",{onClick:s,key:this.props.team+this.props.control+e},this.renderLabel(e,t))}render(){const e=[],t=[],s=[];for(let e=1;e<=this.props.number;e++)t.push(this.renderButton(e,e));return s.push(this.renderButton(-1,-1)),1==this.props.number?t.push(this.renderButton("Reset")):s.push(this.renderButton("Reset")),e.push(React.createElement("div",{key:this.props.team+this.props.control+"btn1"},t)),e.push(React.createElement("div",{key:this.props.team+this.props.control+"btn2"},s)),React.createElement(n,{label:this.props.control,color:this.props.color,value:this.props.value,buttons:e})}}class i extends React.Component{constructor(e){super(e),this.state={team:e.team,name:e.data.name}}render(){return React.createElement("div",{team:this.props.team,className:"team "+this.props.team},React.createElement("h2",{},this.props.data.name),React.createElement(l,{value:this.props.data.score,team:this.props.team,color:"orange",control:"Score",number:3,onClick:e=>this.props.onClick(e)}),React.createElement(l,{value:this.props.data.fouls,team:this.props.team,color:"green",control:"Fouls",number:1,onClick:e=>this.props.onClick(e)}),React.createElement(l,{value:this.props.data.tol,team:this.props.team,color:"green",control:"TimeOuts",number:1,onClick:e=>this.props.onClick(e)}),React.createElement("button",{onClick:e=>this.props.onClick({control:this.props.team+"TimeOut",value:0})},"Timeout"))}}const p=0,u=1,d=2,h=3;class m extends React.Component{constructor(e){let t=p,s=null,o=null;document.cookie.split(";").map(e=>e.split("=")).forEach(e=>{if("lastsuccess"==e[0]){t=d;let n=decodeURIComponent(e[1]).split("=");s=n[0],o=n[1]}});super(e),this.state={isConnected:t,socket:null,aeskey:o,aesEcb:null,ip:s,game:{clockLeft:"0",clockMiddle:":",clockRight:"0",shotClock:"24.00",period:1},home:{name:"",score:0,fouls:0,poss:!1,tol:0},away:{name:"",score:0,fouls:0,poss:!1,tol:0}},window.addEventListener("beforeunload",e=>this.onUnload(e))}onUnload(e){if(this.setState({isConnected:h}),null==this.state.socket)return;if(this.state.socket.readyState!=WebSocket.OPEN)return;this.state.socket.send('{"command":"closeSocket","data":"","amount":0}'),this.state.socket.close()}webCommand(e,t,s){return'{"command":"'+e+'","data":"'+t+'","amount":'+s+"}"}encrypt(e,t){var s,o;let n;const a=this.state.aeskey;return null==this.state.aesEcb?(n=new aesjs.ModeOfOperation.ecb(a),this.setState({aesEcb:n})):n=this.state.aesEcb,s=aesjs.utils.utf8.toBytes(e),o=aesjs.padding.pkcs7.pad(s),n.encrypt(o),base64js.fromByteArray(n.encrypt(aesjs.padding.pkcs7.pad(aesjs.utils.utf8.toBytes(e))))}onConnection(e,t,s){e.onopen=e=>this.onOpen(e),e.onmessage=e=>this.onReceive(e),e.onclose=e=>this.onClose(e),this.setState({socket:e,aeskey:t,ip:s,isConnected:d})}onOpen(e){const t=this.webCommand("handshake","",0);this.state.socket.send(this.encrypt(t,this.state.key)),this.setState({isConnected:u}),document.cookie="lastsuccess="+encodeURIComponent(this.state.ip+"="+this.state.aeskey)}onClick(e){const t=this.webCommand(e.control,"",e.value);this.state.socket.send(this.encrypt(t,this.state.key))}onClose(e){this.state.isConnected==u?alert("Connection to scoreboard has been lost."):this.state.isConnected==h||alert("Failed to connect to scoreboard."),this.setState({socket:null,isConnected:p})}onReceive(e){if("BasketBall\n"==e.data)return;const t=JSON.parse(e.data);t.game.poss="true"==t.away.poss?"right":"true"==t.home.poss?"left":null,this.setState({game:t.game,home:t.home,away:t.away})}render(){return this.state.isConnected==u?React.createElement("div",{},React.createElement(c,{data:this.state.game,onClick:e=>this.onClick(e)}),React.createElement(i,{team:"away",data:this.state.away,onClick:e=>this.onClick(e)}),React.createElement(i,{team:"home",data:this.state.home,onClick:e=>this.onClick(e)})):React.createElement(o,{aeskey:this.state.aeskey,ip:this.state.ip,onConnect:(e,t,s)=>this.onConnection(e,t,s)})}}const k=document.getElementById("scorevu_form");ReactDOM.render(React.createElement(m),k)}]);